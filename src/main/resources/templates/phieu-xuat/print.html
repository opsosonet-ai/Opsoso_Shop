<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Phiếu Xuất Kho</title>
    <style>
        @page { size: A5; margin: 10mm; }
        body { font-family: Arial; font-size: 12px; }
        .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; }
        .title { font-size: 18px; font-weight: bold; margin: 10px 0; }
        .info { margin: 15px 0; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #000; padding: 5px; }
        th { background-color: #f0f0f0; }
        .center { text-align: center; }
        .right { text-align: right; }
    </style>
</head>
<body>
    <div class="header">
        <div style="text-align: center; margin-bottom: 15px;">
            <h2 th:if="${storeInfo}" th:text="${storeInfo.storeName}" style="margin: 0 0 5px 0;">CÔNG TY ABC</h2>
            <h2 th:unless="${storeInfo}" style="margin: 0 0 5px 0;">CÔNG TY ABC</h2>
            
            <p th:if="${storeInfo}" th:text="${storeInfo.address}" style="margin: 0 0 5px 0;">Địa chỉ công ty</p>
            <p th:unless="${storeInfo}" style="margin: 0 0 5px 0;">Địa chỉ công ty</p>
            
            <p style="margin: 0 0 5px 0;">
                <th:block th:if="${storeInfo} and ${storeInfo.phone ne null}">
                    <span th:text="'ĐT: ' + ${storeInfo.phone}">ĐT: 0123-456-789</span>
                </th:block>
                <th:block th:if="${storeInfo} and ${storeInfo.phone eq null}">
                    <span>ĐT: 0123-456-789</span>
                </th:block>
                <th:block th:unless="${storeInfo}">
                    <span>ĐT: 0123-456-789</span>
                </th:block>
                <span th:text="' | Email: '">  | Email: </span>
                <th:block th:if="${storeInfo} and ${storeInfo.email ne null}">
                    <span th:text="${storeInfo.email}">info@company.com</span>
                </th:block>
                <th:block th:if="${storeInfo} and ${storeInfo.email eq null}">
                    <span>info@company.com</span>
                </th:block>
                <th:block th:unless="${storeInfo}">
                    <span>info@company.com</span>
                </th:block>
            </p>
        </div>
        <div class="title">PHIẾU XUẤT BÁN HÀNG</div>
    </div>

    <div class="info">
        <p><strong>Mã phiếu:</strong> <span th:text="${phieuXuat.maPhieuXuat}">PX001</span></p>
        <p><strong>Ngày xuất:</strong> <span th:text="${#temporals.format(phieuXuat.ngayXuat, 'dd/MM/yyyy')}">01/01/2024</span></p>
        <p><strong>Người xuất:</strong> <span th:text="${phieuXuat.nguoiXuat}">Nhân viên</span></p>
    </div>

    <table>
        <thead>
            <tr>
                <th>STT</th>
                <th>Tên hàng hóa</th>
                <th>ĐVT</th>
                <th>Số lượng</th>
                <th>Đơn giá</th>
                <th>Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="item, stat : ${phieuXuat.chiTietList}">
                <td class="center" th:text="${stat.count}">1</td>
                <td th:text="${item.hangHoa != null ? item.hangHoa.tenHangHoa : 'N/A'}">Hàng hóa</td>
                <td class="center" th:text="${item.hangHoa != null ? item.hangHoa.donViTinh : 'N/A'}">Cái</td>
                <td class="center" th:text="${item.soLuong}">1</td>
                <td class="right" th:text="${@numberFormatter.formatCurrency(item.donGia)}">1.000.000</td>
                <td class="right" th:text="${@numberFormatter.formatCurrency(item.thanhTien)}">1.000.000</td>
            </tr>
        </tbody>
    </table>

    <div class="info">
        <p><strong>Tổng tiền:</strong> <span th:text="${@numberFormatter.formatCurrencyWithUnit(phieuXuat.tongTien)}">1.000.000 VNĐ</span></p>
    </div>

    <div class="signature-section" style="margin-top: 30px; display: flex; justify-content: space-between;">
        <div style="text-align: center; width: 30%;">
            <p><strong>Bán hàng</strong></p>
            <div style="height: 50px;"></div>
            <p style="border-top: 1px solid #000; margin: 0; padding-top: 5px;">Ký, ghi rõ họ tên</p>
        </div>
        <div style="text-align: center; width: 30%;">
            <p><strong>Kế toán</strong></p>
            <div style="height: 50px;"></div>
            <p style="border-top: 1px solid #000; margin: 0; padding-top: 5px;">Ký, ghi rõ họ tên</p>
        </div>
        <div style="text-align: center; width: 30%;">
            <p><strong>Người mua hàng</strong></p>
            <div style="height: 50px;"></div>
            <p style="border-top: 1px solid #000; margin: 0; padding-top: 5px;">Ký, ghi rõ họ tên</p>
        </div>
    </div>
</body>
</html>
